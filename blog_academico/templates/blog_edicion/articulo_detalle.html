{% extends "base.html" %}

{% block title %}{{ articulo.titulo }}{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">

      <div class="text-center mb-4">
        {% if articulo.categoria %}
        <span class="badge bg-primary fs-6 mb-2">{{ articulo.categoria.nombre }}</span>
        {% endif %}
        <h1 class="display-4 fw-bold text-dark mb-3">{{ articulo.titulo }}</h1>

        <div class="d-flex justify-content-center align-items-center text-muted">
          <div class="small">
            Por <span class="fw-bold text-dark">{{ articulo.autor.username }}</span>
            <span class="mx-2">‚Ä¢</span>
            {{ articulo.fecha_publicacion|date:"d de F, Y" }}
          </div>
        </div>
      </div>

      {% if articulo.imagen %}
      <div class="mb-5 shadow rounded overflow-hidden">
        <img src="{{ articulo.imagen.url }}" class="img-fluid w-100" style="object-fit: cover; max-height: 500px;"
          alt="{{ articulo.titulo }}">
      </div>
      {% endif %}

      <div class="article-content fs-5 lh-lg mb-5 text-break text-dark">
        {{ articulo.contenido|linebreaks }}
      </div>

      {% if user.is_authenticated and user == articulo.autor %}
      <div class="card bg-light border-0 mb-5">
        <div class="card-body d-flex flex-column flex-md-row justify-content-between align-items-center p-4">
          <div class="mb-3 mb-md-0">
            <h6 class="mb-1 fw-bold">‚öôÔ∏è Panel de Gesti√≥n</h6>
            <small class="text-muted">Como autor, puedes administrar esta publicaci√≥n.</small>
          </div>
          <div>
            <a href="{% url 'blog_edicion:editar_articulo' articulo.pk %}"
              class="btn btn-warning text-dark fw-bold me-2">
              ‚úèÔ∏è Editar
            </a>

            <a href="{% url 'blog_edicion:eliminar_articulo' articulo.pk %}" class="btn btn-danger fw-bold"
              onclick="return confirm('¬øEst√°s seguro de que quieres eliminar este art√≠culo? Esta acci√≥n no se puede deshacer.');">
              üóëÔ∏è Eliminar
            </a>
          </div>
        </div>
      </div>
      {% endif %}

      <div class="text-center mb-5">
        <a href="{% url 'blog_edicion:ver_todas_noticias' %}" class="text-decoration-none fw-bold text-secondary">
          &larr; Volver al Portal
        </a>
      </div>

    </div>
  </div>
</div>
{% endblock %}